<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¹´í˜ ì •ë³´ - ì»¤í”¼CMD</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/terminal.css">
    <style>
        /* ì¹´í˜ ì •ë³´ í˜ì´ì§€ ì „ìš© ìŠ¤íƒ€ì¼ */
        .cafes-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .cafe-item {
            padding: 10px;
            border: 1px solid #333;
            cursor: pointer;
            border-radius: 3px;
        }
        
        .cafe-item:hover {
            background-color: #031;
            border-color: #0f0;
        }
        
        .cafe-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        .cafe-name {
            font-weight: bold;
            color: yellow;
        }
        
        .cafe-rating {
            color: #0f0;
        }
        
        .cafe-address {
            margin-bottom: 5px;
        }
        
        .cafe-features {
            margin-bottom: 5px;
        }
        
        .cafe-meta {
            display: flex;
            justify-content: space-between;
            color: #999;
            font-size: 12px;
            margin-top: 5px;
        }
        
        .cafe-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 5px;
        }
        
        .cafe-tag {
            background-color: #333;
            color: #0f0;
            padding: 2px 5px;
            border-radius: 3px;
            font-size: 12px;
        }
        
        .map-container {
            height: 300px;
            border: 1px solid #0f0;
            margin-bottom: 15px;
            padding: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-style: italic;
            color: #999;
            background-color: #111;
        }
        
        .filter-bar {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
            padding: 10px;
            border: 1px solid #0f0;
            border-radius: 3px;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
            flex: 1;
            min-width: 150px;
        }
        
        .filter-label {
            font-size: 12px;
            color: #999;
            margin-bottom: 3px;
        }
        
        .filter-options {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }
        
        .badge.selected {
            background-color: #006600;
        }
        
        .search-bar {
            display: flex;
            margin-bottom: 15px;
            gap: 5px;
        }
        
        .search-input {
            flex: 1;
        }
        
        .cafe-detail {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .cafe-info {
            display: flex;
            gap: 10px;
        }
        
        .cafe-thumbnail {
            width: 120px;
            height: 80px;
            background-color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #999;
            font-size: 12px;
            border: 1px solid #0f0;
        }
        
        .cafe-content {
            flex: 1;
        }
        
        .cafe-description {
            margin-bottom: 10px;
        }
        
        .cafe-features-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 5px;
            margin-top: 10px;
        }
        
        .cafe-feature {
            display: flex;
            align-items: center;
        }
        
        .feature-icon {
            margin-right: 5px;
            color: #0f0;
        }
        
        .recommendation-tag {
            display: inline-block;
            padding: 2px 6px;
            background-color: #063;
            color: #fff;
            border-radius: 3px;
            font-size: 12px;
            margin-left: 10px;
        }
        
        .promotion-tag {
            display: inline-block;
            padding: 2px 6px;
            background-color: #630;
            color: #fff;
            border-radius: 3px;
            font-size: 12px;
            margin-left: 5px;
        }
    </style>
</head>
<body>
    <div class="terminal-screen">
        <div class="message system-message">ì¶”ì²œ ì¹´í˜ ì •ë³´ í™”ë©´ì…ë‹ˆë‹¤. ë¯¸íŒ…í•˜ê¸° ì¢‹ì€ ì¹´í˜ë¥¼ ì°¾ì•„ë³´ì„¸ìš”.</div>
        
        <div class="search-bar">
            <input type="text" class="form-input search-input" id="searchInput" placeholder="ì¹´í˜ ì´ë¦„ ë˜ëŠ” ìœ„ì¹˜ ê²€ìƒ‰">
            <button class="command-button" id="searchButton">ê²€ìƒ‰</button>
        </div>
        
        <div class="filter-bar">
            <div class="filter-group">
                <div class="filter-label">ì§€ì—­</div>
                <div class="filter-options">
                    <span class="badge selected" data-filter="location" data-value="all">ì „ì²´</span>
                    <span class="badge" data-filter="location" data-value="ê°•ë‚¨">ê°•ë‚¨</span>
                    <span class="badge" data-filter="location" data-value="í™ëŒ€">í™ëŒ€</span>
                    <span class="badge" data-filter="location" data-value="íŒêµ">íŒêµ</span>
                    <span class="badge" data-filter="location" data-value="ì„±ìˆ˜">ì„±ìˆ˜</span>
                    <span class="badge" data-filter="location" data-value="ì—¬ì˜ë„">ì—¬ì˜ë„</span>
                </div>
            </div>
            
            <div class="filter-group">
                <div class="filter-label">íŠ¹ì§•</div>
                <div class="filter-options">
                    <span class="badge selected" data-filter="feature" data-value="all">ì „ì²´</span>
                    <span class="badge" data-filter="feature" data-value="ì¡°ìš©í•¨">ì¡°ìš©í•¨</span>
                    <span class="badge" data-filter="feature" data-value="ì½˜ì„¼íŠ¸">ì½˜ì„¼íŠ¸</span>
                    <span class="badge" data-filter="feature" data-value="ì™€ì´íŒŒì´">ì™€ì´íŒŒì´</span>
                    <span class="badge" data-filter="feature" data-value="ë„“ì€ìë¦¬">ë„“ì€ìë¦¬</span>
                    <span class="badge" data-filter="feature" data-value="ì£¼ì°¨">ì£¼ì°¨</span>
                </div>
            </div>
            
            <div class="filter-group">
                <div class="filter-label">ì •ë ¬</div>
                <div class="filter-options">
                    <span class="badge selected" data-filter="sort" data-value="popular">ì¸ê¸°ìˆœ</span>
                    <span class="badge" data-filter="sort" data-value="rating">í‰ì ìˆœ</span>
                    <span class="badge" data-filter="sort" data-value="recent">ìµœì‹ ìˆœ</span>
                </div>
            </div>
        </div>
        
        <div class="map-container">
            <div>ì§€ë„ ê¸°ëŠ¥ì€ í˜„ì¬ ê°œë°œ ì¤‘ì…ë‹ˆë‹¤. ì¶”í›„ ì—…ë°ì´íŠ¸ë  ì˜ˆì •ì…ë‹ˆë‹¤.</div>
        </div>
        
        <div class="card">
            <div class="card-title">ì¸ê¸° ë¯¸íŒ… ì¥ì†Œ</div>
            <div class="cafes-container" id="popularCafes">
                <div class="cafe-item" data-id="cafe1" data-location="ê°•ë‚¨" data-features="ì¡°ìš©í•¨,ì½˜ì„¼íŠ¸,ì™€ì´íŒŒì´">
                    <div class="cafe-header">
                        <div class="cafe-name">ìŠ¤íƒ€ë²…ìŠ¤ ê°•ë‚¨ì  <span class="recommendation-tag">ì¶”ì²œ</span></div>
                        <div class="cafe-rating">â˜…â˜…â˜…â˜…â˜† 4.5</div>
                    </div>
                    <div class="cafe-address">ì„œìš¸ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 101</div>
                    <div class="cafe-features">2ì¸µ í…Œì´ë¸” ìë¦¬ ë„“ìŒ, ì™€ì´íŒŒì´ ë¹ ë¦„, ì†ŒìŒ ì ìŒ</div>
                    <div class="cafe-meta">
                        <div>ì¶”ì²œ ì‹œê°„: í‰ì¼ ì˜¤í›„ 1ì‹œ~4ì‹œ</div>
                        <div>ğŸ‘ 32</div>
                    </div>
                    <div class="cafe-tags">
                        <div class="cafe-tag">ë„“ì€ ê³µê°„</div>
                        <div class="cafe-tag">ì¡°ìš©í•¨</div>
                        <div class="cafe-tag">ì½˜ì„¼íŠ¸ ë§ìŒ</div>
                    </div>
                </div>
                
                <div class="cafe-item" data-id="cafe2" data-location="ì„±ìˆ˜" data-features="ì¡°ìš©í•¨,ì½˜ì„¼íŠ¸,ë„“ì€ìë¦¬">
                    <div class="cafe-header">
                        <div class="cafe-name">ì¹´í˜ ê³µëª… <span class="promotion-tag">ì¿ í°</span></div>
                        <div class="cafe-rating">â˜…â˜…â˜…â˜…â˜… 4.8</div>
                    </div>
                    <div class="cafe-address">ì„œìš¸ ì„±ë™êµ¬ ëšì„¬ë¡œ 123</div>
                    <div class="cafe-features">ë…ë¦½ëœ ë¯¸íŒ…ë£¸ ìˆìŒ, ì¡°ìš©í•œ ë¶„ìœ„ê¸°, ë””ì €íŠ¸ ë§›ìˆìŒ</div>
                    <div class="cafe-meta">
                        <div>ì¿ í°: ì»¤í”¼ì±— ì˜ˆì•½ ì‹œ ì•„ë©”ë¦¬ì¹´ë…¸ 1+1</div>
                        <div>ğŸ‘ 28</div>
                    </div>
                    <div class="cafe-tags">
                        <div class="cafe-tag">ë¯¸íŒ…ë£¸</div>
                        <div class="cafe-tag">ë””ì €íŠ¸</div>
                        <div class="cafe-tag">í”„ë¡œëª¨ì…˜</div>
                    </div>
                </div>
                
                <div class="cafe-item" data-id="cafe3" data-location="í™ëŒ€" data-features="ì™€ì´íŒŒì´,ë„“ì€ìë¦¬">
                    <div class="cafe-header">
                        <div class="cafe-name">ì¹´í˜ ë…¸ë§ˆë“œ</div>
                        <div class="cafe-rating">â˜…â˜…â˜…â˜…â˜† 4.3</div>
                    </div>
                    <div class="cafe-address">ì„œìš¸ ë§ˆí¬êµ¬ ì–‘í™”ë¡œ 45</div>
                    <div class="cafe-features">ì½˜ì„¼íŠ¸ ë§ìŒ, ì˜¤ë˜ ìˆì–´ë„ ëˆˆì¹˜ ì•ˆì¤Œ, í…Œë¼ìŠ¤ ìë¦¬ ìˆìŒ</div>
                    <div class="cafe-meta">
                        <div>ì¶”ì²œ ë©”ë‰´: ë”ì¹˜ì»¤í”¼, ë°”ë‹ë¼ ë¼ë–¼</div>
                        <div>ğŸ‘ 25</div>
                    </div>
                    <div class="cafe-tags">
                        <div class="cafe-tag">í…Œë¼ìŠ¤</div>
                        <div class="cafe-tag">ì˜¤ë˜ ìˆê¸°</div>
                        <div class="cafe-tag">ë¶„ìœ„ê¸°</div>
                    </div>
                </div>
                
                <div class="cafe-item" data-id="cafe4" data-location="íŒêµ" data-features="ì¡°ìš©í•¨,ì½˜ì„¼íŠ¸,ì™€ì´íŒŒì´,ì£¼ì°¨">
                    <div class="cafe-header">
                        <div class="cafe-name">ì»¤í”¼ íŒ©í† ë¦¬ íŒêµì  <span class="recommendation-tag">ì¶”ì²œ</span></div>
                        <div class="cafe-rating">â˜…â˜…â˜…â˜…â˜† 4.4</div>
                    </div>
                    <div class="cafe-address">ê²½ê¸° ì„±ë‚¨ì‹œ ë¶„ë‹¹êµ¬ íŒêµì—­ë¡œ 42</div>
                    <div class="cafe-features">IT ì¢…ì‚¬ìë“¤ì´ ë§ì´ ì°¾ëŠ” ê³³, ì£¼ì°¨ 2ì‹œê°„ ë¬´ë£Œ, ìë¦¬ ë„“ìŒ</div>
                    <div class="cafe-meta">
                        <div>ì¶”ì²œ ì‹œê°„: í‰ì¼ ì˜¤ì „ 10ì‹œ~12ì‹œ</div>
                        <div>ğŸ‘ 23</div>
                    </div>
                    <div class="cafe-tags">
                        <div class="cafe-tag">ì£¼ì°¨ ê°€ëŠ¥</div>
                        <div class="cafe-tag">IT ì¸ë§¥</div>
                        <div class="cafe-tag">ë…¸íŠ¸ë¶</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="card-title">ìƒˆë¡œ ì¶”ê°€ëœ ì¹´í˜</div>
            <div class="cafes-container" id="newCafes">
                <div class="cafe-item" data-id="cafe5" data-location="ì—¬ì˜ë„" data-features="ì¡°ìš©í•¨,ì½˜ì„¼íŠ¸,ì™€ì´íŒŒì´">
                    <div class="cafe-header">
                        <div class="cafe-name">ë¸Œë£¨ì‰ í¬ì¸íŠ¸ <span class="promotion-tag">ì‹ ê·œ</span></div>
                        <div class="cafe-rating">â˜…â˜…â˜…â˜…â˜† 4.6</div>
                    </div>
                    <div class="cafe-address">ì„œìš¸ ì˜ë“±í¬êµ¬ ì—¬ì˜ëŒ€ë¡œ 120</div>
                    <div class="cafe-features">ê¸ˆìœµê¶Œ ì¢…ì‚¬ìë“¤ì´ ë§ì´ ì°¾ëŠ” ê³³, ê°œì¸ ì‘ì—… ê³µê°„ ë¶„ë¦¬</div>
                    <div class="cafe-meta">
                        <div>ì‹ ê·œ ì˜¤í”ˆ: 2025ë…„ 2ì›”</div>
                        <div>ğŸ‘ 18</div>
                    </div>
                    <div class="cafe-tags">
                        <div class="cafe-tag">ê¸ˆìœµê¶Œ</div>
                        <div class="cafe-tag">ìŠ¤í˜ì…œí‹°</div>
                        <div class="cafe-tag">ì‹ ê·œ</div>
                    </div>
                </div>
                
                <div class="cafe-item" data-id="cafe6" data-location="ì„±ìˆ˜" data-features="ì™€ì´íŒŒì´,ë„“ì€ìë¦¬">
                    <div class="cafe-header">
                        <div class="cafe-name">ë¸”ë£¨ë³´í‹€ ì„±ìˆ˜ì </div>
                        <div class="cafe-rating">â˜…â˜…â˜…â˜…â˜† 4.2</div>
                    </div>
                    <div class="cafe-address">ì„œìš¸ ì„±ë™êµ¬ ì•„ì°¨ì‚°ë¡œ 70</div>
                    <div class="cafe-features">ì¸í…Œë¦¬ì–´ê°€ ë©‹ì§„ ì¹´í˜, ì‚¬ì§„ì°ê¸° ì¢‹ìŒ, ì»¤í”¼ í’ˆì§ˆ ë†’ìŒ</div>
                    <div class="cafe-meta">
                        <div>ì¶”ì²œ ë©”ë‰´: ì½œë“œë¸Œë£¨, ë‰´ì˜¬ë¦¬ì–¸ìŠ¤</div>
                        <div>ğŸ‘ 21</div>
                    </div>
                    <div class="cafe-tags">
                        <div class="cafe-tag">ì¸í…Œë¦¬ì–´</div>
                        <div class="cafe-tag">í¬í† ì¡´</div>
                        <div class="cafe-tag">ìŠ¤í˜ì…œí‹°</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="input-line">
            <span class="prompt">ì¹´í˜></span>
            <input type="text" class="command-input" id="commandInput" placeholder="'ê²€ìƒ‰ [ì§€ì—­ëª…]' ëª…ë ¹ì–´ë¡œ ì¹´í˜ë¥¼ ê²€ìƒ‰í•˜ì„¸ìš”">
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const commandInput = document.getElementById('commandInput');
            const searchInput = document.getElementById('searchInput');
            const searchButton = document.getElementById('searchButton');
            
            // í•„í„° ì´ë²¤íŠ¸ ì²˜ë¦¬
            setupFilters();
            
            // ì¹´í˜ í•­ëª© í´ë¦­ ì²˜ë¦¬
            setupCafeClicks();
            
            // ê²€ìƒ‰ ë²„íŠ¼ ì²˜ë¦¬
            searchButton.addEventListener('click', function() {
                const keyword = searchInput.value.trim();
                if (keyword) {
                    searchCafes(keyword);
                } else {
                    window.parent.postMessage({
                        action: 'notification',
                        text: 'ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.',
                        type: 'error'
                    }, '*');
                }
            });
            
            // ê²€ìƒ‰ ì…ë ¥ì°½ ì—”í„° ì²˜ë¦¬
            searchInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    searchButton.click();
                }
            });
            
            // ëª…ë ¹ì–´ ì…ë ¥ ì²˜ë¦¬
            commandInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    processCommand(this.value);
                    this.value = '';
                }
            });
            
            // í•„í„° ì„¤ì •
            function setupFilters() {
                const filterBadges = document.querySelectorAll('.badge[data-filter]');
                
                filterBadges.forEach(badge => {
                    badge.addEventListener('click', function() {
                        const filterType = this.getAttribute('data-filter');
                        const filterValue = this.getAttribute('data-value');
                        
                        // ê°™ì€ í•„í„° ê·¸ë£¹ì—ì„œ ì„ íƒëœ ë±ƒì§€ ë³€ê²½
                        document.querySelectorAll(`.badge[data-filter="${filterType}"]`).forEach(b => {
                            b.classList.remove('selected');
                        });
                        
                        this.classList.add('selected');
                        
                        // í•„í„° ì ìš©
                        applyFilters();
                    });
                });
            }
            
            // í•„í„° ì ìš©
            function applyFilters() {
                const locationFilter = document.querySelector('.badge.selected[data-filter="location"]').getAttribute('data-value');
                const featureFilter = document.querySelector('.badge.selected[data-filter="feature"]').getAttribute('data-value');
                const sortFilter = document.querySelector('.badge.selected[data-filter="sort"]').getAttribute('data-value');
                
                const allCafes = document.querySelectorAll('.cafe-item');
                
                allCafes.forEach(cafe => {
                    const cafeLocation = cafe.getAttribute('data-location');
                    const cafeFeatures = cafe.getAttribute('data-features')?.split(',') || [];
                    
                    let visible = true;
                    
                    if (locationFilter !== 'all' && cafeLocation !== locationFilter) {
                        visible = false;
                    }
                    
                    if (featureFilter !== 'all' && !cafeFeatures.includes(featureFilter)) {
                        visible = false;
                    }
                    
                    cafe.style.display = visible ? 'block' : 'none';
                });
                
                // ì •ë ¬ (ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ë” ë³µì¡í•œ ì •ë ¬ ë¡œì§ í•„ìš”)
                if (sortFilter !== 'popular') {
                    window.parent.postMessage({
                        action: 'notification',
                        text: `${sortFilter === 'rating' ? 'í‰ì ' : 'ìµœì‹ '}ìˆœìœ¼ë¡œ ì •ë ¬ë©ë‹ˆë‹¤.`,
                        type: 'info'
                    }, '*');
                }
            }
            
            // ì¹´í˜ í•­ëª© í´ë¦­ ì²˜ë¦¬
            function setupCafeClicks() {
                const cafeItems = document.querySelectorAll('.cafe-item');
                
                cafeItems.forEach(cafe => {
                    cafe.addEventListener('click', function() {
                        const cafeId = this.getAttribute('data-id');
                        openCafeDetail(cafeId);
                    });
                });
            }
            
            // ì¹´í˜ ìƒì„¸ ì •ë³´ ì—´ê¸°
            function openCafeDetail(cafeId) {
                // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” API í˜¸ì¶œì„ í†µí•´ ì¹´í˜ ìƒì„¸ ì •ë³´ë¥¼ ê°€ì ¸ì˜´
                // ì—¬ê¸°ì„œëŠ” ê°„ë‹¨í•œ ì‹œë®¬ë ˆì´ì…˜ë§Œ êµ¬í˜„
                
                let cafeName, cafeAddress, cafeRating, cafeFeatures, cafeRecommendation, cafePromotion;
                
                switch (cafeId) {
                    case 'cafe1':
                        cafeName = 'ìŠ¤íƒ€ë²…ìŠ¤ ê°•ë‚¨ì ';
                        cafeAddress = 'ì„œìš¸ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 101';
                        cafeRating = '4.5';
                        cafeFeatures = '2ì¸µ í…Œì´ë¸” ìë¦¬ ë„“ìŒ, ì™€ì´íŒŒì´ ë¹ ë¦„, ì†ŒìŒ ì ìŒ';
                        cafeRecommendation = 'í‰ì¼ ì˜¤í›„ 1ì‹œ~4ì‹œ';
                        cafePromotion = '';
                        break;
                        
                    case 'cafe2':
                        cafeName = 'ì¹´í˜ ê³µëª…';
                        cafeAddress = 'ì„œìš¸ ì„±ë™êµ¬ ëšì„¬ë¡œ 123';
                        cafeRating = '4.8';
                        cafeFeatures = 'ë…ë¦½ëœ ë¯¸íŒ…ë£¸ ìˆìŒ, ì¡°ìš©í•œ ë¶„ìœ„ê¸°, ë””ì €íŠ¸ ë§›ìˆìŒ';
                        cafeRecommendation = '';
                        cafePromotion = 'ì»¤í”¼ì±— ì˜ˆì•½ ì‹œ ì•„ë©”ë¦¬ì¹´ë…¸ 1+1';
                        break;
                        
                    case 'cafe3':
                        cafeName = 'ì¹´í˜ ë…¸ë§ˆë“œ';
                        cafeAddress = 'ì„œìš¸ ë§ˆí¬êµ¬ ì–‘í™”ë¡œ 45';
                        cafeRating = '4.3';
                        cafeFeatures = 'ì½˜ì„¼íŠ¸ ë§ìŒ, ì˜¤ë˜ ìˆì–´ë„ ëˆˆì¹˜ ì•ˆì¤Œ, í…Œë¼ìŠ¤ ìë¦¬ ìˆìŒ';
                        cafeRecommendation = 'ì¶”ì²œ ë©”ë‰´: ë”ì¹˜ì»¤í”¼, ë°”ë‹ë¼ ë¼ë–¼';
                        cafePromotion = '';
                        break;
                        
                    case 'cafe4':
                        cafeName = 'ì»¤í”¼ íŒ©í† ë¦¬ íŒêµì ';
                        cafeAddress = 'ê²½ê¸° ì„±ë‚¨ì‹œ ë¶„ë‹¹êµ¬ íŒêµì—­ë¡œ 42';
                        cafeRating = '4.4';
                        cafeFeatures = 'IT ì¢…ì‚¬ìë“¤ì´ ë§ì´ ì°¾ëŠ” ê³³, ì£¼ì°¨ 2ì‹œê°„ ë¬´ë£Œ, ìë¦¬ ë„“ìŒ';
                        cafeRecommendation = 'í‰ì¼ ì˜¤ì „ 10ì‹œ~12ì‹œ';
                        cafePromotion = '';
                        break;
                        
                    case 'cafe5':
                        cafeName = 'ë¸Œë£¨ì‰ í¬ì¸íŠ¸';
                        cafeAddress = 'ì„œìš¸ ì˜ë“±í¬êµ¬ ì—¬ì˜ëŒ€ë¡œ 120';
                        cafeRating = '4.6';
                        cafeFeatures = 'ê¸ˆìœµê¶Œ ì¢…ì‚¬ìë“¤ì´ ë§ì´ ì°¾ëŠ” ê³³, ê°œì¸ ì‘ì—… ê³µê°„ ë¶„ë¦¬';
                        cafeRecommendation = '';
                        cafePromotion = 'ì‹ ê·œ ì˜¤í”ˆ: 2025ë…„ 2ì›”';
                        break;
                        
                    case 'cafe6':
                        cafeName = 'ë¸”ë£¨ë³´í‹€ ì„±ìˆ˜ì ';
                        cafeAddress = 'ì„œìš¸ ì„±ë™êµ¬ ì•„ì°¨ì‚°ë¡œ 70';
                        cafeRating = '4.2';
                        cafeFeatures = 'ì¸í…Œë¦¬ì–´ê°€ ë©‹ì§„ ì¹´í˜, ì‚¬ì§„ì°ê¸° ì¢‹ìŒ, ì»¤í”¼ í’ˆì§ˆ ë†’ìŒ';
                        cafeRecommendation = 'ì¶”ì²œ ë©”ë‰´: ì½œë“œë¸Œë£¨, ë‰´ì˜¬ë¦¬ì–¸ìŠ¤';
                        cafePromotion = '';
                        break;
                        
                    default:
                        cafeName = 'ì¹´í˜ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';
                        cafeAddress = 'ì£¼ì†Œ ì •ë³´ ì—†ìŒ';
                        cafeRating = '0.0';
                        cafeFeatures = '';
                        cafeRecommendation = '';
                        cafePromotion = '';
                }
                
                const cafeDetailContent = `
                    <div class="cafe-detail">
                        <div class="cafe-info">
                            <div class="cafe-thumbnail">ì¹´í˜ ì´ë¯¸ì§€</div>
                            <div class="cafe-content">
                                <div><span style="font-weight:bold;color:yellow;">${cafeName}</span> <span style="color:#999;">â˜…${cafeRating}</span></div>
                                <div style="color:#999;margin:5px 0;">${cafeAddress}</div>
                                ${cafePromotion ? `<div style="color:#ff9900;margin-bottom:5px;">ğŸ ${cafePromotion}</div>` : ''}
                                ${cafeRecommendation ? `<div style="color:#0f0;margin-bottom:5px;">ğŸ’¡ ${cafeRecommendation}</div>` : ''}
                            </div>
                        </div>
                        
                        <div class="cafe-description">
                            ${cafeFeatures}
                        </div>
                        
                        <div style="border-top:1px dashed #0f0;padding-top:10px;">
                            <div style="margin-bottom:5px;color:#0f0;">í¸ì˜ ì‹œì„¤</div>
                            <div class="cafe-features-grid">
                                <div class="cafe-feature"><span class="feature-icon">âœ“</span> ì™€ì´íŒŒì´</div>
                                <div class="cafe-feature"><span class="feature-icon">âœ“</span> ì½˜ì„¼íŠ¸</div>
                                <div class="cafe-feature"><span class="feature-icon">âœ“</span> í™”ì¥ì‹¤</div>
                                <div class="cafe-feature"><span class="feature-icon">âœ“</span> ë„“ì€ í…Œì´ë¸”</div>
                                ${cafeId === 'cafe4' ? '<div class="cafe-feature"><span class="feature-icon">âœ“</span> ì£¼ì°¨</div>' : ''}
                                ${cafeId === 'cafe2' ? '<div class="cafe-feature"><span class="feature-icon">âœ“</span> ë¯¸íŒ…ë£¸</div>' : ''}
                            </div>
                        </div>
                        
                        <div style="border-top:1px dashed #0f0;padding-top:10px;">
                            <div style="margin-bottom:5px;color:#0f0;">ì˜ì—… ì‹œê°„</div>
                            <div>í‰ì¼: 08:00 - 22:00</div>
                            <div>ì£¼ë§: 10:00 - 22:00</div>
                        </div>
                        
                        <div style="border-top:1px dashed #0f0;padding-top:10px;margin-top:10px;">
                            <div style="margin-bottom:5px;color:#0f0;">ë¦¬ë·°</div>
                            <div style="color:#999;font-style:italic;">"ë¯¸íŒ…í•˜ê¸° ì¢‹ì€ ì¹´í˜ì…ë‹ˆë‹¤. ìë¦¬ë„ ë„“ê³  ì†ŒìŒë„ ì ë‹¹í•´ìš”."</div>
                            <div style="text-align:right;color:#999;font-size:12px;">- ê¹€ê°œë°œë‹˜</div>
                        </div>
                    </div>
                `;
                
                window.parent.postMessage({
                    action: 'openModal',
                    title: `${cafeName} ìƒì„¸ ì •ë³´`,
                    content: cafeDetailContent,
                    buttons: [
                        {
                            text: 'ì¼ì • ì¡ê¸°',
                            action: function() {
                                scheduleMeeting(cafeName, cafeAddress);
                                return false; // ëª¨ë‹¬ ìœ ì§€
                            }
                        },
                        {
                            text: 'í™•ì¸'
                        }
                    ]
                }, '*');
            }
            
            // ì¹´í˜ ê²€ìƒ‰
            function searchCafes(keyword) {
                window.parent.postMessage({
                    action: 'notification',
                    text: `"${keyword}" í‚¤ì›Œë“œë¡œ ê²€ìƒ‰ ì¤‘...`,
                    type: 'info'
                }, '*');
                
                // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” API í˜¸ì¶œì„ í†µí•´ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜´
                // ì—¬ê¸°ì„œëŠ” ê°„ë‹¨í•œ ì‹œë®¬ë ˆì´ì…˜ë§Œ êµ¬í˜„
                
                // ê²€ìƒ‰ì–´ì— ë”°ë¥¸ ê²°ê³¼ í•„í„°ë§
                const allCafes = document.querySelectorAll('.cafe-item');
                let matchCount = 0;
                
                allCafes.forEach(cafe => {
                    const name = cafe.querySelector('.cafe-name').textContent.toLowerCase();
                    const address = cafe.querySelector('.cafe-address').textContent.toLowerCase();
                    const features = cafe.querySelector('.cafe-features').textContent.toLowerCase();
                    
                    if (name.includes(keyword.toLowerCase()) || 
                        address.includes(keyword.toLowerCase()) ||
                        features.includes(keyword.toLowerCase())) {
                        cafe.style.display = 'block';
                        matchCount++;
                    } else {
                        cafe.style.display = 'none';
                    }
                });
                
                // ê²€ìƒ‰ ê²°ê³¼ ì•Œë¦¼
                setTimeout(() => {
                    if (matchCount > 0) {
                        window.parent.postMessage({
                            action: 'notification',
                            text: `"${keyword}" ê²€ìƒ‰ ê²°ê³¼: ${matchCount}ê°œì˜ ì¹´í˜ë¥¼ ì°¾ì•˜ìŠµë‹ˆë‹¤.`,
                            type: 'success'
                        }, '*');
                    } else {
                        window.parent.postMessage({
                            action: 'notification',
                            text: `"${keyword}" ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.`,
                            type: 'error'
                        }, '*');
                    }
                }, 500);
            }
            
            // ë¯¸íŒ… ì¼ì • ì¡ê¸°
            function scheduleMeeting(cafeName, cafeAddress) {
                const dateTimeContent = `
                    <div class="form-group">
                        <label class="form-label">ì¼ì • ì œëª©</label>
                        <input type="text" class="form-input" id="scheduleTitle" value="ì»¤í”¼ì±— ë¯¸íŒ…">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ë¯¸íŒ… ìƒëŒ€</label>
                        <select class="form-select" id="schedulePartner">
                            <option value="ê¹€ê°œë°œ">ê¹€ê°œë°œ (í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì)</option>
                            <option value="ë°•ë””ìì´ë„ˆ">ë°•ë””ìì´ë„ˆ (UX/UI ë””ìì´ë„ˆ)</option>
                            <option value="ì´ì°½ì—…">ì´ì°½ì—… (ìŠ¤íƒ€íŠ¸ì—… ëŒ€í‘œ)</option>
                            <option value="ìµœë§ˆì¼€í„°">ìµœë§ˆì¼€í„° (ë””ì§€í„¸ ë§ˆì¼€í„°)</option>
                            <option value="ì •UX">ì •UX (UX ë¦¬ì„œì²˜)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ë‚ ì§œ</label>
                        <input type="date" class="form-input" id="scheduleDate" min="${new Date().toISOString().split('T')[0]}">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ì‹œê°„</label>
                        <input type="time" class="form-input" id="scheduleTime">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ì¥ì†Œ</label>
                        <input type="text" class="form-input" id="scheduleLocation" value="${cafeName}" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ì£¼ì†Œ</label>
                        <input type="text" class="form-input" id="scheduleAddress" value="${cafeAddress}" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ë©”ëª¨</label>
                        <textarea class="form-textarea" id="scheduleMemo" placeholder="ë¯¸íŒ… ì£¼ì œë‚˜ ì¤€ë¹„ë¬¼ ë“±ì„ ë©”ëª¨í•˜ì„¸ìš”."></textarea>
                    </div>
                `;
                
                window.parent.postMessage({
                    action: 'openModal',
                    title: 'ì»¤í”¼ì±— ì¼ì • ì¡ê¸°',
                    content: dateTimeContent,
                    buttons: [
                        {
                            text: 'ì €ì¥',
                            action: function() {
                                const title = document.getElementById('scheduleTitle').value.trim();
                                const partner = document.getElementById('schedulePartner').value;
                                const date = document.getElementById('scheduleDate').value;
                                const time = document.getElementById('scheduleTime').value;
                                
                                if (!title) {
                                    alert('ì¼ì • ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                                    return false;
                                }
                                
                                if (!date) {
                                    alert('ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                                    return false;
                                }
                                
                                if (!time) {
                                    alert('ì‹œê°„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                                    return false;
                                }
                                
                                window.parent.postMessage({
                                    action: 'notification',
                                    text: `${partner}ë‹˜ê³¼ì˜ ì»¤í”¼ì±— ì¼ì •ì´ ${date} ${time}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.`,
                                    type: 'success'
                                }, '*');
                                
                                // ê²½í—˜ì¹˜ íšë“
                                window.parent.postMessage({
                                    action: 'updateUser',
                                    userData: {
                                        exp: 20,
                                        points: 10
                                    }
                                }, '*');
                            }
                        },
                        {
                            text: 'ì·¨ì†Œ',
                            type: 'cancel'
                        }
                    ]
                }, '*');
            }
            
            // ëª…ë ¹ì–´ ì²˜ë¦¬
            function processCommand(command) {
                if (!command.trim()) return;
                
                const commandLower = command.toLowerCase().trim();
                
                if (commandLower.startsWith('ê²€ìƒ‰ ') || commandLower.startsWith('search ')) {
                    const keyword = commandLower.split(' ').slice(1).join(' ');
                    searchInput.value = keyword;
                    searchCafes(keyword);
                } else if (commandLower.startsWith('ì¼ì • ') || commandLower.startsWith('schedule ')) {
                    const parts = commandLower.split(' ');
                    if (parts.length < 2) {
                        window.parent.postMessage({
                            action: 'notification',
                            text: `ëª…ë ¹ì–´ í˜•ì‹ì´ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤. 'ì¼ì • [ì¹´í˜ID]' í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.`,
                            type: 'error'
                        }, '*');
                        return;
                    }
                    
                    const cafeId = parts[1];
                    const cafe = document.querySelector(`.cafe-item[data-id="${cafeId}"]`);
                    if (cafe) {
                        const cafeName = cafe.querySelector('.cafe-name').textContent.split(' ')[0];
                        const cafeAddress = cafe.querySelector('.cafe-address').textContent;
                        scheduleMeeting(cafeName, cafeAddress);
                    } else {
                        window.parent.postMessage({
                            action: 'notification',
                            text: `ì¹´í˜ ID "${cafeId}"ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`,
                            type: 'error'
                        }, '*');
                    }
                } else if (commandLower.startsWith('ìƒì„¸ ') || commandLower.startsWith('detail ')) {
                    const cafeId = commandLower.split(' ')[1];
                    openCafeDetail(cafeId);
                } else if (commandLower === 'help' || commandLower === 'ë„ì›€ë§') {
                    showHelp();
                } else {
                    window.parent.postMessage({
                        action: 'notification',
                        text: `'${command}' ëª…ë ¹ì–´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. 'help'ë¥¼ ì…ë ¥í•˜ì—¬ ë„ì›€ë§ì„ í™•ì¸í•˜ì„¸ìš”.`,
                        type: 'error'
                    }, '*');
                }
            }
            
            // ë„ì›€ë§ í‘œì‹œ
            function showHelp() {
                const helpContent = `
                    <div class="message">- <span style="color: yellow;">ê²€ìƒ‰ [í‚¤ì›Œë“œ]</span>: ì¹´í˜ ê²€ìƒ‰</div>
                    <div class="message">- <span style="color: yellow;">ì¼ì • [ì¹´í˜ID]</span>: í•´ë‹¹ ì¹´í˜ì—ì„œ ì¼ì • ì¡ê¸° (ì˜ˆ: ì¼ì • cafe1)</div>
                    <div class="message">- <span style="color: yellow;">ìƒì„¸ [ì¹´í˜ID]</span>: ì¹´í˜ ìƒì„¸ ì •ë³´ ë³´ê¸° (ì˜ˆ: ìƒì„¸ cafe2)</div>
                    <div class="message">- <span style="color: yellow;">ë„ì›€ë§</span>: ì´ ë„ì›€ë§ í‘œì‹œ</div>
                `;
                
                window.parent.postMessage({
                    action: 'openModal',
                    title: 'ì¹´í˜ ì •ë³´ ëª…ë ¹ì–´ ë„ì›€ë§',
                    content: helpContent,
                    buttons: [
                        {
                            text: 'í™•ì¸'
                        }
                    ]
                }, '*');
            }
        });
    </script>
</body>
</html>