<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í”„ë¡œí•„ - ì»¤í”¼CMD</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/terminal.css">
    <style>
        /* í”„ë¡œí•„ í˜ì´ì§€ ì „ìš© ìŠ¤íƒ€ì¼ */
        .profile-container {
            margin-bottom: 20px;
        }
        
        .profile-section {
            margin-bottom: 15px;
        }
        
        .profile-item {
            display: flex;
            padding: 5px 0;
        }
        
        .profile-label {
            flex: 0 0 120px;
            color: #999;
        }
        
        .profile-value {
            flex: 1;
        }
        
        .profile-edit {
            color: #0ff;
            cursor: pointer;
            margin-left: 10px;
        }
        
        .profile-edit:hover {
            text-decoration: underline;
        }
        
        .interests-container {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 5px;
        }
        
        .achievement {
            padding: 8px;
            margin-bottom: 8px;
            border: 1px solid #333;
            border-radius: 3px;
        }
        
        .achievement:hover {
            background-color: #031;
            border-color: #0f0;
        }
        
        .achievement-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }
        
        .achievement-title {
            font-weight: bold;
            color: #0f0;
        }
        
        .achievement-date {
            color: #999;
            font-size: 12px;
        }
        
        .achievement-icon {
            margin-right: 5px;
        }
        
        .profile-photo {
            text-align: center;
            margin-bottom: 15px;
        }
        
        .photo-placeholder {
            display: inline-block;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 1px solid #0f0;
            color: #0f0;
            line-height: 100px;
            text-align: center;
            font-size: 36px;
            background-color: #031;
            margin-bottom: 10px;
        }
        
        .stats-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        
        .stat-box {
            flex: 1;
            min-width: 100px;
            padding: 10px;
            border: 1px solid #0f0;
            border-radius: 3px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 24px;
            color: #0f0;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 12px;
            color: #999;
        }
        
        .settings-toggle {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .toggle-label {
            margin-right: 10px;
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 40px;
            height: 20px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #333;
            transition: .4s;
            border-radius: 20px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 2px;
            bottom: 2px;
            background-color: #999;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background-color: #063;
        }
        
        input:checked + .toggle-slider:before {
            background-color: #0f0;
            transform: translateX(20px);
        }
    </style>
</head>
<body>
    <div class="terminal-screen">
        <div class="message system-message">ë‚´ í”„ë¡œí•„ í™”ë©´ì…ë‹ˆë‹¤. ê°œì¸ ì •ë³´ì™€ í™œë™ ë‚´ì—­ì„ í™•ì¸í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
        
        <div class="card">
            <div class="card-title">ê¸°ë³¸ ì •ë³´</div>
            <div class="profile-container">
                <div class="profile-photo">
                    <div class="photo-placeholder" id="profileInitials">?</div>
                    <button class="command-button" id="changePhotoBtn">ì‚¬ì§„ ë³€ê²½</button>
                </div>
                
                <div class="profile-item">
                    <div class="profile-label">ì´ë¦„</div>
                    <div class="profile-value" id="profileName">í”„ë¡œí•„ëª…ì„ ì„¤ì •í•´ì£¼ì„¸ìš”</div>
                    <div class="profile-edit" data-field="name">ìˆ˜ì •</div>
                </div>
                
                <div class="profile-item">
                    <div class="profile-label">ì§ì—…</div>
                    <div class="profile-value" id="profileJob">ì›¹ ê°œë°œì</div>
                    <div class="profile-edit" data-field="job">ìˆ˜ì •</div>
                </div>
                
                <div class="profile-item">
                    <div class="profile-label">ì´ë©”ì¼</div>
                    <div class="profile-value" id="profileEmail">ì´ë©”ì¼ì„ ì„¤ì •í•´ì£¼ì„¸ìš”</div>
                    <div class="profile-edit" data-field="email">ìˆ˜ì •</div>
                </div>
                
                <div class="profile-item">
                    <div class="profile-label">ì§€ì—­</div>
                    <div class="profile-value" id="profileLocation">ì„œìš¸ ê°•ë‚¨êµ¬</div>
                    <div class="profile-edit" data-field="location">ìˆ˜ì •</div>
                </div>
                
                <div class="profile-item">
                    <div class="profile-label">ì†Œê°œ</div>
                    <div class="profile-value" id="profileBio">ìê¸°ì†Œê°œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</div>
                    <div class="profile-edit" data-field="bio">ìˆ˜ì •</div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="card-title">ë ˆë²¨ ë° ê²½í—˜ì¹˜</div>
            <div class="profile-container">
                <div class="profile-item">
                    <div class="profile-label">í˜„ì¬ ë ˆë²¨</div>
                    <div class="profile-value" id="currentLevel">Lv.3</div>
                </div>
                
                <div class="profile-item">
                    <div class="profile-label">ê²½í—˜ì¹˜</div>
                    <div class="profile-value" id="expProgress">340/500</div>
                </div>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="expBar" style="width: 68%;"></div>
                </div>
                
                <div class="profile-item">
                    <div class="profile-label">ë‹¤ìŒ ë ˆë²¨ê¹Œì§€</div>
                    <div class="profile-value" id="remainingExp">160 XP</div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="card-title">ê´€ì‹¬ì‚¬ ì„¤ì •</div>
            <div class="profile-container">
                <div class="interests-container" id="interestsContainer">
                    <span class="badge">JavaScript</span>
                    <span class="badge">React</span>
                    <span class="badge">UX/UI</span>
                    <span class="badge">ì»¤í”¼</span>
                    <span class="badge">ì—¬í–‰</span>
                </div>
                
                <div class="profile-item" style="margin-top: 10px;">
                    <button class="command-button" id="addInterestBtn">ê´€ì‹¬ì‚¬ ì¶”ê°€</button>
                    <button class="command-button" id="removeInterestBtn">ê´€ì‹¬ì‚¬ ì œê±°</button>
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="card-title">í™œë™ í†µê³„</div>
            <div class="stats-container">
                <div class="stat-box">
                    <div class="stat-value" id="matchesCount">8</div>
                    <div class="stat-label">ì´ ë§¤ì¹­ ìˆ˜</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="meetingsCount">3</div>
                    <div class="stat-label">ì™„ë£Œëœ ë¯¸íŒ…</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="recommendationsCount">5</div>
                    <div class="stat-label">ë°›ì€ ì¶”ì²œ</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="pointsCount">127</div>
                    <div class="stat-label">í™œë™ ì ìˆ˜</div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="card-title">íšë“í•œ ë±ƒì§€</div>
            <div class="profile-container">
                <div class="achievement">
                    <div class="achievement-header">
                        <div class="achievement-title"><span class="achievement-icon">ğŸŒ±</span> ì²« ë¯¸íŒ… ì™„ë£Œ</div>
                        <div class="achievement-date">2025-02-10</div>
                    </div>
                    <div>ì²˜ìŒìœ¼ë¡œ ì»¤í”¼ì±— ë¯¸íŒ…ì„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤.</div>
                </div>
                
                <div class="achievement">
                    <div class="achievement-header">
                        <div class="achievement-title"><span class="achievement-icon">ğŸ”</span> íƒí—˜ê°€</div>
                        <div class="achievement-date">2025-02-15</div>
                    </div>
                    <div>ë‹¤ì–‘í•œ ì§êµ°ì˜ ì‚¬ëŒë“¤ê³¼ 3íšŒ ì´ìƒ ë¯¸íŒ…ì„ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.</div>
                </div>
                
                <div class="achievement">
                    <div class="achievement-header">
                        <div class="achievement-title"><span class="achievement-icon">â­</span> ì¢‹ì€ í‰ê°€</div>
                        <div class="achievement-date">2025-02-22</div>
                    </div>
                    <div>ë¯¸íŒ… í›„ 5ì  ë§Œì ì˜ í‰ê°€ë¥¼ ë°›ì•˜ìŠµë‹ˆë‹¤.</div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="card-title">ì•± ì„¤ì •</div>
            <div class="profile-container">
                <div class="settings-toggle">
                    <div class="toggle-label">ì•Œë¦¼ ì„¤ì •</div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="notificationToggle" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                
                <div class="settings-toggle">
                    <div class="toggle-label">ì†Œë¦¬ íš¨ê³¼</div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="soundToggle" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                
                <div class="settings-toggle">
                    <div class="toggle-label">ë‹¤í¬ëª¨ë“œ</div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="darkModeToggle" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                
                <div class="profile-item" style="margin-top: 10px;">
                    <button class="command-button" id="resetSettingsBtn">ì„¤ì • ì´ˆê¸°í™”</button>
                    <button class="command-button" id="exportDataBtn">ë°ì´í„° ë‚´ë³´ë‚´ê¸°</button>
                </div>
            </div>
        </div>
        
        <div class="input-line">
            <span class="prompt">í”„ë¡œí•„></span>
            <input type="text" class="command-input" id="commandInput" placeholder="'ìˆ˜ì • [í•­ëª©]' ëª…ë ¹ì–´ë¡œ í”„ë¡œí•„ì„ ìˆ˜ì •í•˜ì„¸ìš”">
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const commandInput = document.getElementById('commandInput');
            const addInterestBtn = document.getElementById('addInterestBtn');
            const removeInterestBtn = document.getElementById('removeInterestBtn');
            const changePhotoBtn = document.getElementById('changePhotoBtn');
            const profileEditBtns = document.querySelectorAll('.profile-edit');
            const notificationToggle = document.getElementById('notificationToggle');
            const soundToggle = document.getElementById('soundToggle');
            const darkModeToggle = document.getElementById('darkModeToggle');
            const resetSettingsBtn = document.getElementById('resetSettingsBtn');
            const exportDataBtn = document.getElementById('exportDataBtn');
            
            // ë¶€ëª¨ ì°½ì— ì‚¬ìš©ì ë°ì´í„° ìš”ì²­
            window.parent.postMessage({ action: 'getUser' }, '*');
            
            // ë¶€ëª¨ ì°½ìœ¼ë¡œë¶€í„° ë©”ì‹œì§€ ìˆ˜ì‹ 
            window.addEventListener('message', function(event) {
                const message = event.data;
                
                if (message.action === 'userData') {
                    updateUserData(message.userData);
                }
            });
            
            // ëª…ë ¹ì–´ ì…ë ¥ ì²˜ë¦¬
            commandInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    processCommand(this.value);
                    this.value = '';
                }
            });
            
            // ì‚¬ìš©ì ë°ì´í„° ì—…ë°ì´íŠ¸
            function updateUserData(userData) {
                // ê¸°ë³¸ ì •ë³´ ì—…ë°ì´íŠ¸
                document.getElementById('profileName').textContent = userData.username || 'í”„ë¡œí•„ëª…ì„ ì„¤ì •í•´ì£¼ì„¸ìš”';
                if (userData.username) {
                    // ì´ë‹ˆì…œ ì„¤ì •
                    document.getElementById('profileInitials').textContent = userData.username.charAt(0);
                }
                
                // ë ˆë²¨ ë° ê²½í—˜ì¹˜ ì—…ë°ì´íŠ¸
                document.getElementById('currentLevel').textContent = `Lv.${userData.level}`;
                document.getElementById('expProgress').textContent = `${userData.exp}/${userData.expMax}`;
                document.getElementById('expBar').style.width = `${(userData.exp / userData.expMax) * 100}%`;
                document.getElementById('remainingExp').textContent = `${userData.expMax - userData.exp} XP`;
                
                // ê´€ì‹¬ì‚¬ ì—…ë°ì´íŠ¸
                if (userData.interests && userData.interests.length > 0) {
                    const interestsContainer = document.getElementById('interestsContainer');
                    interestsContainer.innerHTML = '';
                    
                    userData.interests.forEach(interest => {
                        const badge = document.createElement('span');
                        badge.className = 'badge';
                        badge.textContent = interest;
                        interestsContainer.appendChild(badge);
                    });
                }
                
                // í™œë™ í†µê³„ ì—…ë°ì´íŠ¸
                document.getElementById('pointsCount').textContent = userData.points;
                
                // ì•± ì„¤ì • ì—…ë°ì´íŠ¸
                if (userData.settings) {
                    notificationToggle.checked = userData.settings.notifications;
                    soundToggle.checked = userData.settings.sounds;
                    darkModeToggle.checked = userData.settings.theme === 'default';
                }
            }
            
            // ê´€ì‹¬ì‚¬ ì¶”ê°€ ë²„íŠ¼
            addInterestBtn.addEventListener('click', function() {
                const interestContent = `
                    <div class="form-group">
                        <label class="form-label">ìƒˆ ê´€ì‹¬ì‚¬</label>
                        <input type="text" class="form-input" id="newInterest" placeholder="ê´€ì‹¬ì‚¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ì¶”ì²œ í‚¤ì›Œë“œ</label>
                        <div>
                            <span class="badge" style="cursor:pointer;" onclick="document.getElementById('newInterest').value='ë°±ì—”ë“œ'">ë°±ì—”ë“œ</span>
                            <span class="badge" style="cursor:pointer;" onclick="document.getElementById('newInterest').value='AI'">AI</span>
                            <span class="badge" style="cursor:pointer;" onclick="document.getElementById('newInterest').value='ë””ìì¸'">ë””ìì¸</span>
                            <span class="badge" style="cursor:pointer;" onclick="document.getElementById('newInterest').value='ë§ˆì¼€íŒ…'">ë§ˆì¼€íŒ…</span>
                            <span class="badge" style="cursor:pointer;" onclick="document.getElementById('newInterest').value='ìŠ¤íƒ€íŠ¸ì—…'">ìŠ¤íƒ€íŠ¸ì—…</span>
                        </div>
                    </div>
                `;
                
                window.parent.postMessage({
                    action: 'openModal',
                    title: 'ê´€ì‹¬ì‚¬ ì¶”ê°€',
                    content: interestContent,
                    buttons: [
                        {
                            text: 'ì¶”ê°€',
                            action: function() {
                                const newInterest = document.getElementById('newInterest').value.trim();
                                if (!newInterest) {
                                    alert('ê´€ì‹¬ì‚¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                                    return false;
                                }
                                
                                // ê´€ì‹¬ì‚¬ ì¶”ê°€
                                const interestsContainer = document.getElementById('interestsContainer');
                                const badge = document.createElement('span');
                                badge.className = 'badge';
                                badge.textContent = newInterest;
                                interestsContainer.appendChild(badge);
                                
                                // ë¶€ëª¨ ì°½ì— ì—…ë°ì´íŠ¸ ì „ì†¡
                                window.parent.postMessage({
                                    action: 'notification',
                                    text: `'${newInterest}' ê´€ì‹¬ì‚¬ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.`,
                                    type: 'success'
                                }, '*');
                            }
                        },
                        {
                            text: 'ì·¨ì†Œ',
                            type: 'cancel'
                        }
                    ]
                }, '*');
            });
            
            // ê´€ì‹¬ì‚¬ ì œê±° ë²„íŠ¼
            removeInterestBtn.addEventListener('click', function() {
                const badges = document.querySelectorAll('#interestsContainer .badge');
                
                if (badges.length === 0) {
                    window.parent.postMessage({
                        action: 'notification',
                        text: 'ì œê±°í•  ê´€ì‹¬ì‚¬ê°€ ì—†ìŠµë‹ˆë‹¤.',
                        type: 'error'
                    }, '*');
                    return;
                }
                
                // í˜„ì¬ ê´€ì‹¬ì‚¬ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
                const interests = [];
                badges.forEach(badge => {
                    interests.push(badge.textContent);
                });
                
                // ì„ íƒ ëª©ë¡ ìƒì„±
                let interestOptions = '';
                interests.forEach(interest => {
                    interestOptions += `<option value="${interest}">${interest}</option>`;
                });
                
                const removeContent = `
                    <div class="form-group">
                        <label class="form-label">ì œê±°í•  ê´€ì‹¬ì‚¬</label>
                        <select class="form-select" id="interestToRemove">
                            ${interestOptions}
                        </select>
                    </div>
                `;
                
                window.parent.postMessage({
                    action: 'openModal',
                    title: 'ê´€ì‹¬ì‚¬ ì œê±°',
                    content: removeContent,
                    buttons: [
                        {
                            text: 'ì œê±°',
                            action: function() {
                                const interestToRemove = document.getElementById('interestToRemove').value;
                                
                                // ê´€ì‹¬ì‚¬ ì œê±°
                                const badges = document.querySelectorAll('#interestsContainer .badge');
                                badges.forEach(badge => {
                                    if (badge.textContent === interestToRemove) {
                                        badge.remove();
                                    }
                                });
                                
                                // ë¶€ëª¨ ì°½ì— ì—…ë°ì´íŠ¸ ì „ì†¡
                                window.parent.postMessage({
                                    action: 'notification',
                                    text: `'${interestToRemove}' ê´€ì‹¬ì‚¬ê°€ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.`,
                                    type: 'success'
                                }, '*');
                            }
                        },
                        {
                            text: 'ì·¨ì†Œ',
                            type: 'cancel'
                        }
                    ]
                }, '*');
            });
            
            // ì‚¬ì§„ ë³€ê²½ ë²„íŠ¼
            changePhotoBtn.addEventListener('click', function() {
                window.parent.postMessage({
                    action: 'notification',
                    text: 'í”„ë¡œí•„ ì‚¬ì§„ ê¸°ëŠ¥ì€ í˜„ì¬ ê°œë°œ ì¤‘ì…ë‹ˆë‹¤.',
                    type: 'info'
                }, '*');
            });
            
            // í”„ë¡œí•„ ìˆ˜ì • ë²„íŠ¼ë“¤ ì²˜ë¦¬
            profileEditBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const field = this.getAttribute('data-field');
                    const currentValue = document.getElementById(`profile${field.charAt(0).toUpperCase() + field.slice(1)}`).textContent;
                    
                    let inputType = 'text';
                    let inputTag = 'input';
                    
                    if (field === 'bio') {
                        inputTag = 'textarea';
                    } else if (field === 'email') {
                        inputType = 'email';
                    }
                    
                    const editContent = `
                        <div class="form-group">
                            <label class="form-label">${field.charAt(0).toUpperCase() + field.slice(1)}</label>
                            ${inputTag === 'textarea' 
                                ? `<textarea class="form-textarea" id="edit${field}" placeholder="${field}ë¥¼ ì…ë ¥í•˜ì„¸ìš”">${currentValue}</textarea>` 
                                : `<input type="${inputType}" class="form-input" id="edit${field}" placeholder="${field}ë¥¼ ì…ë ¥í•˜ì„¸ìš”" value="${currentValue}">`
                            }
                        </div>
                    `;
                    
                    window.parent.postMessage({
                        action: 'openModal',
                        title: `${field.charAt(0).toUpperCase() + field.slice(1)} ìˆ˜ì •`,
                        content: editContent,
                        buttons: [
                            {
                                text: 'ì €ì¥',
                                action: function() {
                                    const newValue = document.getElementById(`edit${field}`).value.trim();
                                    
                                    if (!newValue) {
                                        alert(`${field}ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.`);
                                        return false;
                                    }
                                    
                                    // í”„ë¡œí•„ í•„ë“œ ì—…ë°ì´íŠ¸
                                    document.getElementById(`profile${field.charAt(0).toUpperCase() + field.slice(1)}`).textContent = newValue;
                                    
                                    // ì´ë¦„ì¸ ê²½ìš° ì´ë‹ˆì…œë„ ì—…ë°ì´íŠ¸
                                    if (field === 'name') {
                                        document.getElementById('profileInitials').textContent = newValue.charAt(0);
                                    }
                                    
                                    // ë¶€ëª¨ ì°½ì— ì—…ë°ì´íŠ¸ ì „ì†¡
                                    window.parent.postMessage({
                                        action: 'notification',
                                        text: `${field.charAt(0).toUpperCase() + field.slice(1)}ì´(ê°€) ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.`,
                                        type: 'success'
                                    }, '*');
                                }
                            },
                            {
                                text: 'ì·¨ì†Œ',
                                type: 'cancel'
                            }
                        ]
                    }, '*');
                });
            });
            
            // ì„¤ì • ì´ˆê¸°í™” ë²„íŠ¼
            resetSettingsBtn.addEventListener('click', function() {
                const confirmContent = `
                    <div>ì •ë§ë¡œ ëª¨ë“  ì„¤ì •ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>
                `;
                
                window.parent.postMessage({
                    action: 'openModal',
                    title: 'ì„¤ì • ì´ˆê¸°í™” í™•ì¸',
                    content: confirmContent,
                    buttons: [
                        {
                            text: 'ì´ˆê¸°í™”',
                            action: function() {
                                // í† ê¸€ ì´ˆê¸°í™”
                                notificationToggle.checked = true;
                                soundToggle.checked = true;
                                darkModeToggle.checked = true;
                                
                                // ë¶€ëª¨ ì°½ì— ì—…ë°ì´íŠ¸ ì „ì†¡
                                window.parent.postMessage({
                                    action: 'notification',
                                    text: 'ëª¨ë“  ì„¤ì •ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.',
                                    type: 'success'
                                }, '*');
                            }
                        },
                        {
                            text: 'ì·¨ì†Œ',
                            type: 'cancel'
                        }
                    ]
                }, '*');
            });
            
            // ë°ì´í„° ë‚´ë³´ë‚´ê¸° ë²„íŠ¼
            exportDataBtn.addEventListener('click', function() {
                window.parent.postMessage({
                    action: 'notification',
                    text: 'ë°ì´í„° ë‚´ë³´ë‚´ê¸° ê¸°ëŠ¥ì€ í˜„ì¬ ê°œë°œ ì¤‘ì…ë‹ˆë‹¤.',
                    type: 'info'
                }, '*');
            });
            
            // ì„¤ì • í† ê¸€ ì²˜ë¦¬
            notificationToggle.addEventListener('change', function() {
                window.parent.postMessage({
                    action: 'updateUser',
                    userData: {
                        settings: {
                            notifications: this.checked
                        }
                    }
                }, '*');
                
                window.parent.postMessage({
                    action: 'notification',
                    text: `ì•Œë¦¼ì´ ${this.checked ? 'í™œì„±í™”' : 'ë¹„í™œì„±í™”'}ë˜ì—ˆìŠµë‹ˆë‹¤.`,
                    type: 'info'
                }, '*');
            });
            
            soundToggle.addEventListener('change', function() {
                window.parent.postMessage({
                    action: 'updateUser',
                    userData: {
                        settings: {
                            sounds: this.checked
                        }
                    }
                }, '*');
                
                window.parent.postMessage({
                    action: 'notification',
                    text: `ì†Œë¦¬ íš¨ê³¼ê°€ ${this.checked ? 'í™œì„±í™”' : 'ë¹„í™œì„±í™”'}ë˜ì—ˆìŠµë‹ˆë‹¤.`,
                    type: 'info'
                }, '*');
            });
            
            darkModeToggle.addEventListener('change', function() {
                window.parent.postMessage({
                    action: 'updateUser',
                    userData: {
                        settings: {
                            theme: this.checked ? 'default' : 'light'
                        }
                    }
                }, '*');
                
                window.parent.postMessage({
                    action: 'notification',
                    text: `${this.checked ? 'ë‹¤í¬' : 'ë¼ì´íŠ¸'} ëª¨ë“œë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.`,
                    type: 'info'
                }, '*');
            });
            
            // ëª…ë ¹ì–´ ì²˜ë¦¬
            function processCommand(command) {
                if (!command.trim()) return;
                
                const commandLower = command.toLowerCase().trim();
                
                if (commandLower.startsWith('ìˆ˜ì • ') || commandLower.startsWith('edit ')) {
                    const field = commandLower.split(' ')[1];
                    const validFields = ['name', 'ì´ë¦„', 'job', 'ì§ì—…', 'email', 'ì´ë©”ì¼', 'location', 'ì§€ì—­', 'bio', 'ì†Œê°œ'];
                    
                    if (!validFields.includes(field)) {
                        window.parent.postMessage({
                            action: 'notification',
                            text: `ìœ íš¨í•œ í•„ë“œ ì´ë¦„ì´ ì•„ë‹™ë‹ˆë‹¤. ìˆ˜ì • ê°€ëŠ¥í•œ í•„ë“œ: ì´ë¦„, ì§ì—…, ì´ë©”ì¼, ì§€ì—­, ì†Œê°œ`,
                            type: 'error'
                        }, '*');
                        return;
                    }
                    
                    // í•„ë“œ ì˜ë¬¸ ë³€í™˜
                    let englishField = field;
                    if (field === 'ì´ë¦„') englishField = 'name';
                    else if (field === 'ì§ì—…') englishField = 'job';
                    else if (field === 'ì´ë©”ì¼') englishField = 'email';
                    else if (field === 'ì§€ì—­') englishField = 'location';
                    else if (field === 'ì†Œê°œ') englishField = 'bio';
                    
                    // í•´ë‹¹ í•„ë“œì˜ ìˆ˜ì • ë²„íŠ¼ í´ë¦­
                    document.querySelector(`.profile-edit[data-field="${englishField}"]`).click();
                } else if (commandLower === 'reset' || commandLower === 'ì´ˆê¸°í™”') {
                    resetSettingsBtn.click();
                } else if (commandLower === 'help' || commandLower === 'ë„ì›€ë§') {
                    showHelp();
                } else {
                    window.parent.postMessage({
                        action: 'notification',
                        text: `'${command}' ëª…ë ¹ì–´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. 'help'ë¥¼ ì…ë ¥í•˜ì—¬ ë„ì›€ë§ì„ í™•ì¸í•˜ì„¸ìš”.`,
                        type: 'error'
                    }, '*');
                }
            }
            
            // ë„ì›€ë§ í‘œì‹œ
            function showHelp() {
                const helpContent = `
                    <div class="message">- <span style="color: yellow;">ìˆ˜ì • [í•­ëª©]</span>: í”„ë¡œí•„ ì •ë³´ ìˆ˜ì • (í•­ëª©: ì´ë¦„, ì§ì—…, ì´ë©”ì¼, ì§€ì—­, ì†Œê°œ)</div>
                    <div class="message">- <span style="color: yellow;">ì´ˆê¸°í™”</span>: ì•± ì„¤ì • ì´ˆê¸°í™”</div>
                    <div class="message">- <span style="color: yellow;">ë„ì›€ë§</span>: ì´ ë„ì›€ë§ í‘œì‹œ</div>
                `;
                
                window.parent.postMessage({
                    action: 'openModal',
                    title: 'í”„ë¡œí•„ ëª…ë ¹ì–´ ë„ì›€ë§',
                    content: helpContent,
                    buttons: [
                        {
                            text: 'í™•ì¸'
                        }
                    ]
                }, '*');
            }
        });
    </script>
</body>
</html>